<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.wiki.mapper.ProductCommentsMapper">
  <resultMap id="BaseResultMap" type="com.example.wiki.domain.ProductComments">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="comm_id" jdbcType="VARCHAR" property="commId" />
    <result column="product_id" jdbcType="VARCHAR" property="productId" />
    <result column="product_name" jdbcType="VARCHAR" property="productName" />
    <result column="order_item_id" jdbcType="VARCHAR" property="orderItemId" />
    <result column="user_id" jdbcType="VARCHAR" property="userId" />
    <result column="is_anonymous" jdbcType="INTEGER" property="isAnonymous" />
    <result column="comm_type" jdbcType="INTEGER" property="commType" />
    <result column="comm_level" jdbcType="INTEGER" property="commLevel" />
    <result column="comm_content" jdbcType="VARCHAR" property="commContent" />
    <result column="comm_imgs" jdbcType="VARCHAR" property="commImgs" />
    <result column="sepc_name" jdbcType="TIMESTAMP" property="sepcName" />
    <result column="reply_status" jdbcType="INTEGER" property="replyStatus" />
    <result column="reply_content" jdbcType="VARCHAR" property="replyContent" />
    <result column="reply_time" jdbcType="TIMESTAMP" property="replyTime" />
    <result column="is_show" jdbcType="INTEGER" property="isShow" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from product_comments
    where comm_id = #{commId,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.example.wiki.domain.ProductComments">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into product_comments (comm_id, product_id, product_name, 
      order_item_id, user_id, is_anonymous, 
      comm_type, comm_level, comm_content, 
      comm_imgs, sepc_name, reply_status, 
      reply_content, reply_time, is_show
      )
    values (#{commId,jdbcType=VARCHAR}, #{productId,jdbcType=VARCHAR}, #{productName,jdbcType=VARCHAR}, 
      #{orderItemId,jdbcType=VARCHAR}, #{userId,jdbcType=VARCHAR}, #{isAnonymous,jdbcType=INTEGER}, 
      #{commType,jdbcType=INTEGER}, #{commLevel,jdbcType=INTEGER}, #{commContent,jdbcType=VARCHAR}, 
      #{commImgs,jdbcType=VARCHAR}, #{sepcName,jdbcType=TIMESTAMP}, #{replyStatus,jdbcType=INTEGER}, 
      #{replyContent,jdbcType=VARCHAR}, #{replyTime,jdbcType=TIMESTAMP}, #{isShow,jdbcType=INTEGER}
      )
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.example.wiki.domain.ProductComments">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update product_comments
    set product_id = #{productId,jdbcType=VARCHAR},
      product_name = #{productName,jdbcType=VARCHAR},
      order_item_id = #{orderItemId,jdbcType=VARCHAR},
      user_id = #{userId,jdbcType=VARCHAR},
      is_anonymous = #{isAnonymous,jdbcType=INTEGER},
      comm_type = #{commType,jdbcType=INTEGER},
      comm_level = #{commLevel,jdbcType=INTEGER},
      comm_content = #{commContent,jdbcType=VARCHAR},
      comm_imgs = #{commImgs,jdbcType=VARCHAR},
      sepc_name = #{sepcName,jdbcType=TIMESTAMP},
      reply_status = #{replyStatus,jdbcType=INTEGER},
      reply_content = #{replyContent,jdbcType=VARCHAR},
      reply_time = #{replyTime,jdbcType=TIMESTAMP},
      is_show = #{isShow,jdbcType=INTEGER}
    where comm_id = #{commId,jdbcType=VARCHAR}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select comm_id, product_id, product_name, order_item_id, user_id, is_anonymous, comm_type, 
    comm_level, comm_content, comm_imgs, sepc_name, reply_status, reply_content, reply_time, 
    is_show
    from product_comments
    where comm_id = #{commId,jdbcType=VARCHAR}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select comm_id, product_id, product_name, order_item_id, user_id, is_anonymous, comm_type, 
    comm_level, comm_content, comm_imgs, sepc_name, reply_status, reply_content, reply_time, 
    is_show
    from product_comments
  </select>
  <select id="getCommentsByProductId" resultType="com.example.wiki.domain.ProductComments" resultMap="BaseResultMap">
    select comm_id, product_id, product_name, order_item_id, user_id, is_anonymous, comm_type,
    comm_level, comm_content, comm_imgs, sepc_name, reply_status, reply_content, reply_time,
    is_show
    from product_comments
    where product_id = #{productId} and is_show = 1
  </select>
  <select id="selectCommentsByKeyword" resultType="com.example.wiki.domain.ProductComments" resultMap="BaseResultMap">
    select comm_id, product_id, product_name, order_item_id, user_id, is_anonymous, comm_type,
    comm_level, comm_content, comm_imgs, sepc_name, reply_status, reply_content, reply_time,
    is_show
    from product_comments
    where
        <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      根据 params 中的 key 进行条件判断
    -->
        <if test="params.productId != null">
             product_id like concat('%',#{params.productId},'%')
        </if>
        <if test="params.userId != null">
            and user_id like concat('%',#{params.userId},'%')
        </if>
        <if test="params.commLevel != null">
            and comm_level like concat('%',#{params.commLevel},'%')
        </if>
        <if test="params.commType != null">
            and comm_type like concat('%',#{params.commType},'%')
        </if>
  </select>
</mapper>